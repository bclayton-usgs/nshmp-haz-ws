
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>FormTest</title>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="css/test.css" type="text/css">

  <!-- Optional theme -->
  <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css"> -->
  <style type="text/css">
  #control {
    width: 360px;
    margin: 20px;
  }

/*  .form-control {
    font-size: 12px;
  }
*/
  .form-horizontal .form-group {
    margin-right: -5px;
    margin-left: -5px;
    margin-bottom: 6px;
  }

  .form-horizontal .form-group-sm .control-label {
    padding-top: 3px;
  }

  .form-group-sm .form-control {
    height: 24px;
    padding: 2px 4px;
  }

  .input-group-sm .input-group-addon {
    height: 24px;
    padding: 2px 4px;
  }

  [class*="col-sm-"] {
    padding-left: 2px;
    padding-right: 2px;
  }

  .form-horizontal .form-group-sm .units {
    text-align: left;
    padding-top: 4px;
  }

  .secondary-input {
    font-weight: normal;
  }

  .disabled {
    color: #aaa;
  }

  .spacer {
    margin-top: 8px;
  }

  .btn-group {
    padding-top: 1px;
  }

  label {
    font-weight: 500;
    /*padding-top: 6px;*/
  }

  </style>
</head>

<body>

<div id="control">



  <!-- <div class="col-sm-6"> -->
    <label for="gmms">Ground Motion Models:</label>
 
    <div id="gmmsorter" class="btn-group btn-group-xs" data-toggle="buttons">
      <label class="btn btn-default active"
             data-toggle="tooltip"
             data-container="body"
             title="Sort by Group">
        <input type="radio"
               value="group"
               name="gmmsort"
               aria-label="Sort by Group"
               checked="true" />
        <span class="glyphicon glyphicon-list"
              aria-hidden="true" />
      </label>
      <label class="btn btn-default"
             data-toggle="tooltip"
             data-container="body"
             title="Sort Alphabetically">
        <input type="radio"
               value="alpha"
               name="gmmsort"
               aria-label="Sort Alphabetically" />
          <span class="glyphicon glyphicon-sort-by-alphabet"
                aria-hidden="true" />
        </input>
      </label>
    </div>

<form action="spectra" method="get">
    <select class="form-control input-sm" id="gmms" size="16" multiple="true">
      <option class="WUS_08_ACTIVE_CRUST" value="BA_08">Boore &amp; Atkinson (2008)</option>
      <option class="WUS_08_ACTIVE_CRUST" value="CB_08">Campbell &amp; Bozorgnia (2008)</option>
      <option class="WUS_08_ACTIVE_CRUST" value="CY_08">Chiou &amp; Youngs (2008)</option>
      <option class="WUS_14_ACTIVE_CRUST" value="ASK_14">Abrahamson, Silva &amp; Kamai (2014)</option>
      <option class="WUS_14_ACTIVE_CRUST" value="BSSA_14">Boore, Stewart, Seyhan &amp; Atkinson (2014)</option>
      <option class="WUS_14_ACTIVE_CRUST" value="CB_14">Campbell &amp; Bozorgnia (2014)</option>
      <option class="WUS_14_ACTIVE_CRUST" value="CY_14">Chiou &amp; Youngs (2014)</option>
      <option class="WUS_14_ACTIVE_CRUST" value="IDRISS_14">Idriss (2014)</option>
      <option class="WUS_08_INTERFACE WUS_14_INTERFACE" value="AB_03_GLOB_INTER">Atkinson &amp; Boore (2003) : Global : Interface : SatMw=8.5</option>
      <option class="WUS_08_SLAB" value="AB_03_GLOB_SLAB">Atkinson &amp; Boore (2003) : Global : Slab : SatMw=8.0</option>
      <option class="WUS_14_SLAB" value="AB_03_GLOB_SLAB_LOW_SAT">Atkinson &amp; Boore (2003) : Global : Slab : SatMw=7.8</option>
      <option class="OTHER" value="AB_03_CASC_INTER">Atkinson &amp; Boore (2003) : Cascadia : Interface : SatMw=8.5</option>
      <option class="WUS_08_SLAB" value="AB_03_CASC_SLAB">Atkinson &amp; Boore (2003) : Cascadia : Slab : SatMw=8.0</option>
      <option class="WUS_14_SLAB" value="AB_03_CASC_SLAB_LOW_SAT">Atkinson &amp; Boore (2003) : Cascadia : Slab : SatMw=7.8</option>
      <option class="WUS_14_INTERFACE" value="AM_09_INTER">Atkinson &amp; Macias (2009): Interface</option>
      <option class="WUS_14_INTERFACE" value="BCHYDRO_12_INTER">BC Hydro (2012): Interface</option>
      <option class="WUS_14_SLAB" value="BCHYDRO_12_SLAB">BC Hydro (2012): Slab</option>
      <option class="WUS_08_INTERFACE" value="YOUNGS_97_INTER">Youngs et al. (1997): Interface</option>
      <option class="WUS_08_SLAB" value="YOUNGS_97_SLAB">Youngs et al. (1997): Slab</option>
      <option class="WUS_08_INTERFACE WUS_14_INTERFACE" value="ZHAO_06_INTER">Zhao et al. (2006): Interface</option>
      <option class="WUS_14_SLAB" value="ZHAO_06_SLAB">Zhao et al. (2006): Slab</option>
      <option class="CEUS_14_STABLE_CRUST" value="AB_06_PRIME">Atkinson &amp; Boore (2006): Prime</option>
      <option class="CEUS_08_STABLE_CRUST" value="AB_06_140BAR">Atkinson &amp; Boore (2006): 140 bar</option>
      <option class="CEUS_08_STABLE_CRUST" value="AB_06_200BAR">Atkinson &amp; Boore (2006): 200 bar</option>
      <option class="CEUS_14_STABLE_CRUST" value="ATKINSON_08_PRIME">Atkinson (2008) Prime</option>
      <option class="CEUS_08_STABLE_CRUST CEUS_14_STABLE_CRUST" value="CAMPBELL_03">Campbell (2003)</option>
      <option class="CEUS_08_STABLE_CRUST CEUS_14_STABLE_CRUST" value="FRANKEL_96">Frankel et al. (1996)</option>
      <option class="CEUS_14_STABLE_CRUST" value="PEZESHK_11">Pezeshk et al. (2011)</option>
      <option class="CEUS_08_STABLE_CRUST CEUS_14_STABLE_CRUST" value="SILVA_02">Silva et al. (2002)</option>
      <option class="CEUS_08_STABLE_CRUST CEUS_14_STABLE_CRUST" value="SOMERVILLE_01">Somerville et al. (2001)</option>
      <option class="CEUS_08_STABLE_CRUST CEUS_14_STABLE_CRUST" value="TP_05">Tavakoli &amp; Pezeshk (2005)</option>
      <option class="CEUS_08_STABLE_CRUST CEUS_14_STABLE_CRUST" value="TORO_97_MW">Toro et al. (1997): Mw</option>
      <option class="OTHER" value="SADIGH_97">Sadigh et al. (1997)</option>
      <option class="OTHER" value="MCVERRY_00_CRUSTAL">McVerry et al. (2000): Crustal</option>
      <option class="OTHER" value="MCVERRY_00_INTERFACE">McVerry et al. (2000): Interface</option>
      <option class="OTHER" value="MCVERRY_00_SLAB">McVerry et al. (2000): Slab</option>
      <option class="OTHER" value="MCVERRY_00_VOLCANIC">McVerry et al. (2000): Volcanic</option>
    </select>
  <!-- </div> -->

  <div class="form-horizontal">
    
    <label class="spacer">Event Parameters:</label>
    <div class="form-group form-group-sm show-grid">
      <label class="col-sm-2 control-label">M<sub>W</sub></label>
      <div class="col-sm-3">
        <input type="text" class="form-control" name="Mw">
      </div>
    </div>
    <div class="form-group form-group-sm">
      <label class="col-sm-2 control-label">Rake</label>
      <div class="col-sm-3">
        <div class="input-group input-group-sm">
          <input type="text" class="form-control" name="rake">
          <span class="input-group-addon">°</span>
        </div>
      </div>
      <div class="col-sm-6 col-sm-offset-1">
        <div id="fault-style" class="btn-group btn-group-xs" data-toggle="buttons">
          <label class="btn btn-default active" title="Strike-Slip">Strike-Slip
            <input type="radio" name="fault-style" value="strike-slip" checked="true">
          </label>
          <label class="btn btn-default" title="Normal">Normal
            <input type="radio" name="fault-style" value="normal">
          </label>
          <label class="btn btn-default" title="Reverse">Reverse
            <input type="radio" name="fault-style" value="reverse">
          </label>
        </div>
      </div>
    </div>
    <div class="form-group form-group-sm">
      <label class="col-sm-2 control-label">Z<sub>HYP</sub></label>
      <div class="col-sm-3">
        <div class="input-group input-group-sm">
          <input type="text" class="form-control" name="zHyp">
          <span class="input-group-addon">km</span>
        </div>
      </div>
      <div class="col-sm-6 col-sm-offset-1">
        <label class="control-label secondary-input">
          <input type="checkbox" checked="true">
          Centered down-dip
        </label>
      </div>
    </div>

    <label class="spacer">Source Geometry:</label>
    <div class="form-group form-group-sm">
      <label class="col-sm-2 control-label">Z<sub>TOP</sub></label>
      <div class="col-sm-3">
        <div class="input-group input-group-sm">
          <input type="text" class="form-control" name="zTop">
          <span class="input-group-addon">km</span>
        </div>
      </div>
      <label class="col-sm-1 control-label">Dip</label>
      <div class="col-sm-3">
        <div class="input-group input-group-sm">
          <input type="number" class="form-control" name="dip">
          <span class="input-group-addon">°</span>
        </div>
      </div>
    </div>
    <div class="form-group form-group-sm">
      <label class="col-sm-2 control-label">Width</label>
      <div class="col-sm-3">
        <div class="input-group input-group-sm">
          <input type="text" class="form-control" name="width">
          <span class="input-group-addon">km</span>
        </div>
      </div>
    </div>

    <label class="spacer">Path Parameters:</label>
    <div class="form-group form-group-sm">
      <label class="col-sm-2 control-label">R<sub>X</sub></label>
      <div class="col-sm-3">
        <div class="input-group input-group-sm">
          <input type="text" class="form-control" name="rX">
          <span class="input-group-addon">km</span>
        </div>
      </div>
      <label class="col-sm-1 control-label disabled">R<sub>Y</sub></label>
      <div class="col-sm-3">
        <div class="input-group input-group-sm">
          <input type="text" class="form-control" disabled="true" name="rY">
          <span class="input-group-addon">km</span>
        </div>
      </div>
    </div>
    <div class="form-group form-group-sm">
      <label class="col-sm-2 control-label">R<sub>RUP</sub></label>
      <div class="col-sm-3">
        <div class="input-group input-group-sm">
          <input type="text" class="form-control" name="rRup">
          <span class="input-group-addon">km</span>
        </div>
      </div>
      <div class="col-sm-1"></div>
      <div class="col-sm-6">
        <label class="control-label secondary-input">
          <input type="checkbox" checked="true">
          Derive R<sub>JB</sub> and R<sub>RUP</sub>
        </label>
      </div>
    </div>
    <div class="form-group form-group-sm">
      <label class="col-sm-2 control-label">R<sub>JB</sub></label>
      <div class="col-sm-3">
        <div class="input-group input-group-sm">
          <input type="text" class="form-control" name="rJB">
          <span class="input-group-addon">km</span>
        </div>
      </div>
      <div class="col-sm-6 col-sm-offset-1">
        <div id="hw-fw" class="btn-group btn-group-xs" data-toggle="buttons">
          <label class="btn btn-default active" title="Hanging Wall">Hanging
            <input type="radio" name="hw-fw" value="hw" checked="true">
          </label>
          <label class="btn btn-default" title="Foot Wall">Foot Wall
            <input type="radio" name="hw-fw" value="fw">
          </label>
        </div>
      </div>
    </div>

    <label class="spacer">Site &amp; Basin:</label>
    <div class="form-group form-group-sm">
      <label class="col-sm-2 control-label">V<sub>S</sub>30</label>
      <div class="col-sm-3">
        <div class="input-group input-group-sm">
          <input type="text" class="form-control" name="vs30">
          <span class="input-group-addon"><sup>m</sup>⁄<sub>s</sub></span>
        </div>
      </div>
      <div class="col-sm-6 col-sm-offset-1">
        <div id="vs-infer" class="btn-group btn-group-xs" data-toggle="buttons">
          <label class="btn btn-default" title="Vs30 Measured">Measured
            <input type="radio" name="vs-infer" value="measured">
          </label>
          <label class="btn btn-default active" title="Vs30 Inferred">Inferred
            <input type="radio" name="vs-infer" value="inferred" checked="true">
          </label>
        </div>
      </div>
    </div>
    <div class="form-group form-group-sm">
      <label class="col-sm-2 control-label">Z<sub>1.0</sub></label>
      <div class="col-sm-3">
        <div class="input-group input-group-sm">
          <input type="text" class="form-control" placeholder="default" name="z1p0">
          <span class="input-group-addon">km</span>
        </div>
      </div>
      <label class="col-sm-1 control-label">Z<sub>2.5</sub></label>
      <div class="col-sm-3">
        <div class="input-group input-group-sm">
          <input type="text" class="form-control" placeholder="default" name="z2p5">
          <span class="input-group-addon">km</span>
        </div>
      </div>
    </div>

  </div>
  <button type="submit" class="btn btn-primary">Submit</button>

  <div id="gmmInputs"></div>

</form>
</div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>

  <script>

  /* process usage response */
  function buildInputs(usage) {
    var params = usage.parameters;

    var inputs = $("#gmmInputs");
    var model = $("#gmmInputs > div").detach();
    // console.log(params.rRup.info);

    Object.keys(params)
      .filter(function (key) {
        if (key === "gmms") return false;
        if (key === "groups") return false;
        return true;
      })
      .forEach(function (key, index) {
        // console.log(params[key].value);
        $("input[name='" + key + "']").val(params[key].value);
        console.log(key + ": " + params[key].value);
      });

    $(params).filter(function (index, param) {
      // if (param.id === "gmms") return false;
      // if (param.id === "groups") return false;
      return true;
    }).each(function (index, param) {
      console.log(param);
    // params.forEach(function(param, index) {
      // if (param.id === "groups") return false;
      // var entry = model.clone();
      // entry.find("label").attr("for", param.id).text(param.shortName + ":");
      // var input = entry.find("input").attr("id", param.id);
      // if (typeof(param.value) === 'boolean') input.attr("type", "checkbox");
      // if (param.units) entry.find("div.units").text(param.units);
      // inputs.append(entry);
    });

  }

  $(function(){
    $('[data-toggle="tooltip"]').tooltip(); 

    var gmmAlphaOptions = $('select#gmms option');
    // console.log(gmmAlphaOptions);

    var gmmGroups = {
      WUS_14_ACTIVE_CRUST : "2014 Active Crust (WUS)",
      CEUS_14_STABLE_CRUST : "2014 Stable Crust (CEUS)",
      WUS_14_INTERFACE : "2014 Subduction Interface (WUS)",
      WUS_14_SLAB : "2014 WUS Subduction Intraslab (WUS)",
      WUS_08_ACTIVE_CRUST : "2008 Active Crust (WUS)",
      CEUS_08_STABLE_CRUST : "2008 Stable Crust (CEUS)",
      WUS_08_INTERFACE : "2008 Subduction Interface (WUS)",
      WUS_08_SLAB : "2008 Subduction Intraslab (WUS)",
      OTHER : "Others"};

    /* Create option groups */
    var gmmGroupOptions = $();
    $.each(gmmGroups, function(key, value) {
      var optGroup = $('<optgroup>').attr('label', value);
      gmmGroupOptions = gmmGroupOptions.add(optGroup);
      optGroup.append(gmmAlphaOptions.filter('.' + key).clone());
    });

    /* Bind option views to sort buttons */
    $("#gmmsorter input").change(function() {
      console.log("clickshit: " + this.value);
    // $("input[name='gmmsort']").change(function() {
      var options = this.value === "alpha" ? gmmAlphaOptions : gmmGroupOptions;
      $("#gmms").empty().append(options);
      $("#gmms").scrollTop(0);
    });

    /* Set initial view to groups */
    $("#gmms").empty().append(gmmGroupOptions);

    /* gimme some ajax */
    $.ajax({
      url: "http://localhost:8080/nshmp-haz-ws/spectra",
      success: buildInputs
    });
    
  });
  </script>

</body>
</html>
